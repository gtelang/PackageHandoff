<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Reactive.Banana.Combinators</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Reactive-Banana-Combinators.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Reactive.Banana.Combinators.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">reactive-banana-1.1.0.1: Library for functional reactive programming (FRP).</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Reactive.Banana.Combinators</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Synopsis</a></li><li><a href="#g:2">Core Combinators</a><ul><li><a href="#g:3">Event and Behavior</a></li><li><a href="#g:4">First-order</a></li><li><a href="#g:5">Moment and accumulation</a></li><li><a href="#g:6">Recursion</a></li><li><a href="#g:7">Higher-order</a></li></ul></li><li><a href="#g:8">Derived Combinators</a><ul><li><a href="#g:9">Infix operators</a></li><li><a href="#g:10">Filtering</a></li><li><a href="#g:11">Accumulation</a></li></ul></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Event">Event</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Behavior">Behavior</a> a</li><li class="src short"><a href="#v:interpret">interpret</a> :: (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b)) -&gt; [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> b]</li><li class="src short">module <a href="../base-4.9.0.0/Control-Applicative.html">Control.Applicative</a></li><li class="src short">module <a href="../base-4.9.0.0/Data-Monoid.html">Data.Monoid</a></li><li class="src short"><a href="#v:never">never</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a</li><li class="src short"><a href="#v:unionWith">unionWith</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a</li><li class="src short"><a href="#v:filterE">filterE</a> :: (a -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a</li><li class="src short"><a href="#v:apply">apply</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b</li><li class="src short"><span class="keyword">data</span> <a href="#t:Moment">Moment</a> a</li><li class="src short"><span class="keyword">class</span> <a href="../base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:MonadMoment">MonadMoment</a> m <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:accumE">accumE</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a)</li><li class="src short"><a href="#v:stepper">stepper</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a)</li><li class="src short"><a href="#v:valueB">valueB</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; m a</li><li class="src short"><a href="#v:valueBLater">valueBLater</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; m a</li><li class="src short"><a href="#v:observeE">observeE</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a</li><li class="src short"><a href="#v:switchE">switchE</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a)</li><li class="src short"><a href="#v:switchB">switchB</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a)</li><li class="src short"><a href="#v:-60--64--62-">(&lt;@&gt;)</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b</li><li class="src short"><a href="#v:-60--64-">(&lt;@)</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b</li><li class="src short"><a href="#v:filterJust">filterJust</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a</li><li class="src short"><a href="#v:filterApply">filterApply</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> (a -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a</li><li class="src short"><a href="#v:whenE">whenE</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a</li><li class="src short"><a href="#v:split">split</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="../base-4.9.0.0/Data-Either.html#t:Either">Either</a> a b) -&gt; (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a, <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b)</li><li class="src short"><a href="#v:unions">unions</a> :: [<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a)] -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a)</li><li class="src short"><a href="#v:accumB">accumB</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a)</li><li class="src short"><a href="#v:mapAccum">mapAccum</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; acc -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (acc -&gt; (x, acc)) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> x, <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> acc)</li></ul></div><div id="interface"><h1 id="g:1">Synopsis</h1><div class="doc"><p>The main types and combinators of Functional Reactive Programming (FRP).</p><p>At its core, FRP is about two data types <code><a href="Reactive-Banana-Combinators.html#t:Event">Event</a></code> and <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code>
and the various ways to combine them.
There is also a third type <code><a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></code>,
which is necessary for the higher-order combinators.</p></div><h1 id="g:2">Core Combinators</h1><h2 id="g:3">Event and Behavior</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Event" class="def">Event</a> a <a href="src/Reactive.Banana.Types.html#Event" class="link">Source</a> <a href="#t:Event" class="selflink">#</a></p><div class="doc"><p><code>Event a</code> represents a stream of events as they occur in time.
Semantically, you can think of <code>Event a</code> as an infinite list of values
that are tagged with their corresponding time of occurrence,</p><pre>type Event a = [(Time,a)]</pre><p>Each pair is called an <em>event occurrence</em>.
Note that within a single event stream,
no two event occurrences may happen at the same time.</p><p><img src="doc/frp-event.png" /></p></div><div class="subs instances"><p id="control.i:Event" class="caption collapser" onclick="toggleSection('i:Event')">Instances</p><div id="section.i:Event" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Event:Functor:1" class="instance expander" onclick="toggleSection('i:id:Event:Functor:1')"></span> <a href="../base-4.9.0.0/Data-Functor.html#t:Functor">Functor</a> <a href="Reactive-Banana-Combinators.html#t:Event">Event</a></span> <a href="src/Reactive.Banana.Types.html#line-42" class="link">Source</a> <a href="#t:Event" class="selflink">#</a></td><td class="doc"><p>The function <code><a href="../base-4.9.0.0/Data-Functor.html#v:fmap">fmap</a></code> applies a function <code>f</code> to every value.
 Semantically,</p><pre>fmap :: (a -&gt; b) -&gt; Event a -&gt; Event b
fmap f e = [(time, f a) | (time, a) &lt;- e]</pre></td></tr><tr><td colspan="2"><div id="section.i:id:Event:Functor:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Behavior" class="def">Behavior</a> a <a href="src/Reactive.Banana.Types.html#Behavior" class="link">Source</a> <a href="#t:Behavior" class="selflink">#</a></p><div class="doc"><p><code>Behavior a</code> represents a value that varies in time.
Semantically, you can think of it as a function</p><pre>type Behavior a = Time -&gt; a</pre><p><img src="doc/frp-behavior.png" /></p></div><div class="subs instances"><p id="control.i:Behavior" class="caption collapser" onclick="toggleSection('i:Behavior')">Instances</p><div id="section.i:Behavior" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Behavior:Functor:1" class="instance expander" onclick="toggleSection('i:id:Behavior:Functor:1')"></span> <a href="../base-4.9.0.0/Data-Functor.html#t:Functor">Functor</a> <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></span> <a href="src/Reactive.Banana.Types.html#line-73" class="link">Source</a> <a href="#t:Behavior" class="selflink">#</a></td><td class="doc"><p>The function <code><a href="../base-4.9.0.0/Data-Functor.html#v:fmap">fmap</a></code> applies a function <code>f</code> at every point in time.
 Semantically,</p><pre>fmap :: (a -&gt; b) -&gt; Behavior a -&gt; Behavior b
fmap f b = \time -&gt; f (b time)</pre></td></tr><tr><td colspan="2"><div id="section.i:id:Behavior:Functor:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Behavior:Applicative:2" class="instance expander" onclick="toggleSection('i:id:Behavior:Applicative:2')"></span> <a href="../base-4.9.0.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></span> <a href="src/Reactive.Banana.Types.html#line-64" class="link">Source</a> <a href="#t:Behavior" class="selflink">#</a></td><td class="doc"><p>The function <code><a href="../base-4.9.0.0/Control-Applicative.html#v:pure">pure</a></code> returns a value that is constant in time. Semantically,</p><pre>pure     :: a -&gt; Behavior a
pure x    = \time -&gt; x</pre><p>The combinator <code><a href="../base-4.9.0.0/Control-Applicative.html#v:-60--42--62-">&lt;*&gt;</a></code> applies a time-varying function to a time-varying value.</p><pre>(&lt;*&gt;)    :: Behavior (a -&gt; b) -&gt; Behavior a -&gt; Behavior b
fx &lt;*&gt; bx = \time -&gt; fx time $ bx time</pre></td></tr><tr><td colspan="2"><div id="section.i:id:Behavior:Applicative:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:interpret" class="def">interpret</a> :: (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b)) -&gt; [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> b] <a href="src/Reactive.Banana.Combinators.html#interpret" class="link">Source</a> <a href="#v:interpret" class="selflink">#</a></p><div class="doc"><p>Interpret an event processing function.
 Useful for testing.</p><p>Note: You can safely assume that this function is pure,
 even though the type seems to suggest otherwise.
 I'm really sorry about the extra <code><a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a></code>, but it can't be helped.
 See source code for the sordid details.</p></div></div><h2 id="g:4">First-order</h2><div class="doc"><p>This subsections lists the primitive first-order combinators for FRP.
 The <code><a href="../base-4.9.0.0/Data-Functor.html#t:Functor">Functor</a></code> and <code><a href="../base-4.9.0.0/Control-Applicative.html#t:Applicative">Applicative</a></code> instances are also part of this,
 but they are documented at the types <code><a href="Reactive-Banana-Combinators.html#t:Event">Event</a></code> and <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code>.</p></div><div class="top"><p class="src">module <a href="../base-4.9.0.0/Control-Applicative.html">Control.Applicative</a></p></div><div class="top"><p class="src">module <a href="../base-4.9.0.0/Data-Monoid.html">Data.Monoid</a></p></div><div class="top"><p class="src"><a id="v:never" class="def">never</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="src/Reactive.Banana.Combinators.html#never" class="link">Source</a> <a href="#v:never" class="selflink">#</a></p><div class="doc"><p>Event that never occurs.
 Semantically,</p><pre>never = []</pre></div></div><div class="top"><p class="src"><a id="v:unionWith" class="def">unionWith</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="src/Reactive.Banana.Combinators.html#unionWith" class="link">Source</a> <a href="#v:unionWith" class="selflink">#</a></p><div class="doc"><p>Merge two event streams of the same type.
 The function argument specifies how event values are to be combined
 in case of a simultaneous occurrence. The semantics are</p><pre>unionWith f ((timex,x):xs) ((timey,y):ys)
   | timex &lt;  timey = (timex,x)     : unionWith f xs ((timey,y):ys)
   | timex &gt;  timey = (timey,y)     : unionWith f ((timex,x):xs) ys
   | timex == timey = (timex,f x y) : unionWith f xs ys</pre></div></div><div class="top"><p class="src"><a id="v:filterE" class="def">filterE</a> :: (a -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="src/Reactive.Banana.Combinators.html#filterE" class="link">Source</a> <a href="#v:filterE" class="selflink">#</a></p><div class="doc"><p>Allow all events that fulfill the predicate, discard the rest.
 Semantically,</p><pre>filterE p es = [(time,a) | (time,a) &lt;- es, p a]</pre></div></div><div class="top"><p class="src"><a id="v:apply" class="def">apply</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b <a href="src/Reactive.Banana.Combinators.html#apply" class="link">Source</a> <a href="#v:apply" class="selflink">#</a></p><div class="doc"><p>Apply a time-varying function to a stream of events.
 Semantically,</p><pre>apply bf ex = [(time, bf time x) | (time, x) &lt;- ex]</pre><p>This function is generally used in its infix variant <code><a href="Reactive-Banana-Combinators.html#v:-60--64--62-">&lt;@&gt;</a></code>.</p></div></div><h2 id="g:5">Moment and accumulation</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Moment" class="def">Moment</a> a <a href="src/Reactive.Banana.Types.html#Moment" class="link">Source</a> <a href="#t:Moment" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></code> monad denotes a <em>pure</em> computation that happens
at one particular moment in time. Semantically, it is a reader monad</p><pre>type Moment a = Time -&gt; a</pre><p>When run, the argument tells the time at which this computation happens.</p><p>Note that in this context, <em>time</em> really means to <em>logical time</em>.
Of course, every calculation on a computer takes some
amount of wall-clock time to complete.
Instead, what is meant here is the time as it relates to
<code><a href="Reactive-Banana-Combinators.html#t:Event">Event</a></code>s and <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code>s.
We use the fiction that every calculation within the <code><a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></code>
monad takes zero <em>logical time</em> to perform.</p></div><div class="subs instances"><p id="control.i:Moment" class="caption collapser" onclick="toggleSection('i:Moment')">Instances</p><div id="section.i:Moment" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Moment:Monad:1" class="instance expander" onclick="toggleSection('i:id:Moment:Monad:1')"></span> <a href="../base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></span> <a href="src/Reactive.Banana.Types.html#line-131" class="link">Source</a> <a href="#t:Moment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Moment:Monad:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; (a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="#v:return" class="selflink">#</a></p><p class="src"><a href="#v:fail">fail</a> :: <a href="../base-4.9.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Moment:Functor:2" class="instance expander" onclick="toggleSection('i:id:Moment:Functor:2')"></span> <a href="../base-4.9.0.0/Data-Functor.html#t:Functor">Functor</a> <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></span> <a href="src/Reactive.Banana.Types.html#line-130" class="link">Source</a> <a href="#t:Moment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Moment:Functor:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Moment:MonadFix:3" class="instance expander" onclick="toggleSection('i:id:Moment:MonadFix:3')"></span> <a href="../base-4.9.0.0/Control-Monad-Fix.html#t:MonadFix">MonadFix</a> <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></span> <a href="src/Reactive.Banana.Types.html#line-137" class="link">Source</a> <a href="#t:Moment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Moment:MonadFix:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mfix">mfix</a> :: (a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a) -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="#v:mfix" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Moment:Applicative:4" class="instance expander" onclick="toggleSection('i:id:Moment:Applicative:4')"></span> <a href="../base-4.9.0.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></span> <a href="src/Reactive.Banana.Types.html#line-134" class="link">Source</a> <a href="#t:Moment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Moment:Applicative:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Moment:MonadMoment:5" class="instance expander" onclick="toggleSection('i:id:Moment:MonadMoment:5')"></span> <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></span> <a href="src/Reactive.Banana.Types.html#line-126" class="link">Source</a> <a href="#t:Moment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Moment:MonadMoment:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftMoment">liftMoment</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="src/Reactive.Banana.Types.html#liftMoment" class="link">Source</a> <a href="#v:liftMoment" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a id="t:MonadMoment" class="def">MonadMoment</a> m <span class="keyword">where</span> <a href="src/Reactive.Banana.Types.html#MonadMoment" class="link">Source</a> <a href="#t:MonadMoment" class="selflink">#</a></p><div class="doc"><p>An instance of the <code><a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a></code> class denotes a computation
that happens at one particular moment in time.
Unlike the <code><a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></code> monad, it need not be pure anymore.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Reactive-Banana-Combinators.html#v:liftMoment">liftMoment</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:liftMoment" class="def">liftMoment</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; m a <a href="src/Reactive.Banana.Types.html#liftMoment" class="link">Source</a> <a href="#v:liftMoment" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:MonadMoment" class="caption collapser" onclick="toggleSection('i:MonadMoment')">Instances</p><div id="section.i:MonadMoment" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadMoment:MonadMoment:1" class="instance expander" onclick="toggleSection('i:ic:MonadMoment:MonadMoment:1')"></span> <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> <a href="Reactive-Banana-Frameworks.html#t:MomentIO">MomentIO</a></span> <a href="src/Reactive.Banana.Types.html#line-127" class="link">Source</a> <a href="#t:MonadMoment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadMoment:MonadMoment:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftMoment">liftMoment</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Frameworks.html#t:MomentIO">MomentIO</a> a <a href="src/Reactive.Banana.Types.html#liftMoment" class="link">Source</a> <a href="#v:liftMoment" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadMoment:MonadMoment:2" class="instance expander" onclick="toggleSection('i:ic:MonadMoment:MonadMoment:2')"></span> <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></span> <a href="src/Reactive.Banana.Types.html#line-126" class="link">Source</a> <a href="#t:MonadMoment" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadMoment:MonadMoment:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftMoment">liftMoment</a> :: <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a <a href="src/Reactive.Banana.Types.html#liftMoment" class="link">Source</a> <a href="#v:liftMoment" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:accumE" class="def">accumE</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a) <a href="src/Reactive.Banana.Combinators.html#accumE" class="link">Source</a> <a href="#v:accumE" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Reactive-Banana-Combinators.html#v:accumE">accumE</a></code> function accumulates a stream of event values,
 similar to a <em>strict</em> left scan, <code>scanl'</code>.
 It starts with an initial value and emits a new value
 whenever an event occurrence happens.
 The new value is calculated by applying the function in the event
 to the old value.</p><p>Example:</p><pre>accumE &quot;x&quot; [(time1,(++&quot;y&quot;)),(time2,(++&quot;z&quot;))]
    = trimE [(time1,&quot;xy&quot;),(time2,&quot;xyz&quot;)]
    where
    trimE e start = [(time,x) | (time,x) &lt;- e, start &lt;= time]</pre></div></div><div class="top"><p class="src"><a id="v:stepper" class="def">stepper</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a) <a href="src/Reactive.Banana.Combinators.html#stepper" class="link">Source</a> <a href="#v:stepper" class="selflink">#</a></p><div class="doc"><p>Construct a time-varying function from an initial value and
 a stream of new values. The result will be a step function.
 Semantically,</p><pre>stepper x0 ex = \time1 -&gt; \time2 -&gt;
    last (x0 : [x | (timex,x) &lt;- ex, time1 &lt;= timex, timex &lt; time2])</pre><p>Here is an illustration of the result Behavior at a particular time:</p><p><img src="doc/frp-stepper.png" /></p><p>Note: The smaller-than-sign in the comparison <code>timex &lt; time2</code> means
 that at time <code>time2 == timex</code>, the value of the Behavior will
 still be the previous value.
 In the illustration, this is indicated by the dots at the end
 of each step.
 This allows for recursive definitions.
 See the discussion below for more on recursion.</p></div></div><h2 id="g:6">Recursion</h2><div class="doc"><p><em>Recursion</em> is a very important technique in FRP that is not apparent
from the type signatures.</p><p>Here is a prototypical example. It shows how the <code><a href="Reactive-Banana-Combinators.html#v:accumE">accumE</a></code> can be expressed
in terms of the <code><a href="Reactive-Banana-Combinators.html#v:stepper">stepper</a></code> and <code><a href="Reactive-Banana-Combinators.html#v:apply">apply</a></code> functions by using recursion:</p><pre>accumE a e1 = mdo
   let e2 = (\a f -&gt; f a) &lt;$&gt; b &lt;@&gt; e1
   b &lt;- stepper a e2
   return e2</pre><p>(The <code>mdo</code> notation refers to <em>value recursion</em> in a monad.
The <code>MonadFix</code> instance for the <code><a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></code> class enables this kind of recursive code.)
(Strictly speaking, this also means that <code><a href="Reactive-Banana-Combinators.html#v:accumE">accumE</a></code> is not a primitive,
because it can be expressed in terms of other combinators.)</p><p>This general pattern appears very often in practice:
A Behavior (here <code>b</code>) controls what value is put into an Event (here <code>e2</code>),
but at the same time, the Event contributes to changes in this Behavior.
Modeling this situation requires recursion.</p><p>For another example, consider a vending machine that sells banana juice.
The amount that the customer still has to pay for a juice
is modeled by a Behavior <code>bAmount</code>.
Whenever the customer inserts a coin into the machine,
an Event <code>eCoin</code> occurs, and the amount will be reduced.
Whenver the amount goes below zero, an Event <code>eSold</code> will occur,
indicating the release of a bottle of fresh banana juice,
and the amount to be paid will be reset to the original price.
The model requires recursion, and can be expressed in code as follows:</p><pre>mdo
    let price = 50 :: Int
    bAmount  &lt;- accumB price $ unions
                  [ subtract 10 &lt;$ eCoin
                  , const price &lt;$ eSold ]
    let eSold = whenE ((&lt;= 0) &lt;$&gt; bAmount) eCoin</pre><p>On one hand, the Behavior <code>bAmount</code> controls whether the Event <code>eSold</code>
occcurs at all; the bottle of banana juice is unavailable to penniless customers.
But at the same time, the Event <code>eSold</code> will cause a reset
of the Behavior <code>bAmount</code>, so both depend on each other.</p><p>Recursive code like this examples works thanks to the semantics of <code><a href="Reactive-Banana-Combinators.html#v:stepper">stepper</a></code>.
In general, <em>mutual recursion</em> between several <code><a href="Reactive-Banana-Combinators.html#t:Event">Event</a></code>s and <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code>s
is always well-defined,
as long as an Event depends on itself only <em>via</em> a Behavior,
and vice versa.</p></div><h2 id="g:7">Higher-order</h2><div class="top"><p class="src"><a id="v:valueB" class="def">valueB</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; m a <a href="src/Reactive.Banana.Combinators.html#valueB" class="link">Source</a> <a href="#v:valueB" class="selflink">#</a></p><div class="doc"><p>Obtain the value of the <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code> at a given moment in time.
 Semantically, it corresponds to</p><pre>valueB b = \time -&gt; b time</pre><p>Note: The value is immediately available for pattern matching.
 Unfortunately, this means that <code>valueB</code> is unsuitable for use
 with value recursion in the <code><a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a></code> monad.
 If you need recursion, please use <code><a href="Reactive-Banana-Combinators.html#v:valueBLater">valueBLater</a></code> instead.</p></div></div><div class="top"><p class="src"><a id="v:valueBLater" class="def">valueBLater</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; m a <a href="src/Reactive.Banana.Combinators.html#valueBLater" class="link">Source</a> <a href="#v:valueBLater" class="selflink">#</a></p><div class="doc"><p>Obtain the value of the <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code> at a given moment in time.
 Semantically, it corresponds to</p><pre>valueBLater b = \time -&gt; b time</pre><p>Note: To allow for more recursion, the value is returned <em>lazily</em>
 and not available for pattern matching immediately.
 It can be used safely with most combinators like <code><a href="Reactive-Banana-Combinators.html#v:stepper">stepper</a></code>.
 If that doesn't work for you, please use <code><a href="Reactive-Banana-Combinators.html#v:valueB">valueB</a></code> instead.</p></div></div><div class="top"><p class="src"><a id="v:observeE" class="def">observeE</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="Reactive-Banana-Combinators.html#t:Moment">Moment</a> a) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="src/Reactive.Banana.Combinators.html#observeE" class="link">Source</a> <a href="#v:observeE" class="selflink">#</a></p><div class="doc"><p>Observe a value at those moments in time where
 event occurrences happen. Semantically,</p><pre>observeE e = [(time, m time) | (time, m) &lt;- e]</pre></div></div><div class="top"><p class="src"><a id="v:switchE" class="def">switchE</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a) <a href="src/Reactive.Banana.Combinators.html#switchE" class="link">Source</a> <a href="#v:switchE" class="selflink">#</a></p><div class="doc"><p>Dynamically switch between <code><a href="Reactive-Banana-Combinators.html#t:Event">Event</a></code>.
 Semantically,</p><pre>switchE ee = \time0 -&gt; concat [trim t1 t2 e | (t1,t2,e) &lt;- intervals ee, time0 &lt;= t1]
    where
    intervals e        = [(time1, time2, x) | ((time1,x),(time2,_)) &lt;- zip e (tail e)]
    trim time1 time2 e = [x | (timex,x) &lt;- e, time1 &lt; timex, timex &lt;= time2]</pre></div></div><div class="top"><p class="src"><a id="v:switchB" class="def">switchB</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a) <a href="src/Reactive.Banana.Combinators.html#switchB" class="link">Source</a> <a href="#v:switchB" class="selflink">#</a></p><div class="doc"><p>Dynamically switch between <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code>.
 Semantically,</p><pre> switchB b0 eb = \time0 -&gt; \time1 -&gt;
    last (b0 : [b | (timeb,b) &lt;- eb, time0 &lt;= timeb, timeb &lt; time1]) time1</pre></div></div><h1 id="g:8">Derived Combinators</h1><h2 id="g:9">Infix operators</h2><div class="top"><p class="src"><a id="v:-60--64--62-" class="def">(&lt;@&gt;)</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b <span class="fixity">infixl 4</span><span class="rightedge"></span> <a href="src/Reactive.Banana.Combinators.html#%3C%40%3E" class="link">Source</a> <a href="#v:-60--64--62-" class="selflink">#</a></p><div class="doc"><p>Infix synonym for the <code><a href="Reactive-Banana-Combinators.html#v:apply">apply</a></code> combinator. Similar to <code><a href="../base-4.9.0.0/Control-Applicative.html#v:-60--42--62-">&lt;*&gt;</a></code>.</p><pre>infixl 4 &lt;@&gt;</pre></div></div><div class="top"><p class="src"><a id="v:-60--64-" class="def">(&lt;@)</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> b -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b <span class="fixity">infixl 4</span><span class="rightedge"></span> <a href="src/Reactive.Banana.Combinators.html#%3C%40" class="link">Source</a> <a href="#v:-60--64-" class="selflink">#</a></p><div class="doc"><p>Tag all event occurrences with a time-varying value. Similar to <code><a href="../base-4.9.0.0/Control-Applicative.html#v:-60--42-">&lt;*</a></code>.</p><pre>infixl 4 &lt;@</pre></div></div><h2 id="g:10">Filtering</h2><div class="top"><p class="src"><a id="v:filterJust" class="def">filterJust</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="src/Reactive.Banana.Combinators.html#filterJust" class="link">Source</a> <a href="#v:filterJust" class="selflink">#</a></p><div class="doc"><p>Allow all event occurrences that are <code><a href="../base-4.9.0.0/Data-Maybe.html#v:Just">Just</a></code> values, discard the rest.
 Variant of <code><a href="Reactive-Banana-Combinators.html#v:filterE">filterE</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:filterApply" class="def">filterApply</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> (a -&gt; <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="src/Reactive.Banana.Combinators.html#filterApply" class="link">Source</a> <a href="#v:filterApply" class="selflink">#</a></p><div class="doc"><p>Allow all events that fulfill the time-varying predicate, discard the rest.
 Generalization of <code><a href="Reactive-Banana-Combinators.html#v:filterE">filterE</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:whenE" class="def">whenE</a> :: <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> <a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a <a href="src/Reactive.Banana.Combinators.html#whenE" class="link">Source</a> <a href="#v:whenE" class="selflink">#</a></p><div class="doc"><p>Allow events only when the behavior is <code><a href="../base-4.9.0.0/Data-Bool.html#v:True">True</a></code>.
 Variant of <code><a href="Reactive-Banana-Combinators.html#v:filterApply">filterApply</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:split" class="def">split</a> :: <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (<a href="../base-4.9.0.0/Data-Either.html#t:Either">Either</a> a b) -&gt; (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> a, <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> b) <a href="src/Reactive.Banana.Combinators.html#split" class="link">Source</a> <a href="#v:split" class="selflink">#</a></p><div class="doc"><p>Split event occurrences according to a tag.
 The <code><a href="../base-4.9.0.0/Data-Either.html#v:Left">Left</a></code> values go into the left component while the <code><a href="../base-4.9.0.0/Data-Either.html#v:Right">Right</a></code> values
 go into the right component of the result.</p></div></div><h2 id="g:11">Accumulation</h2><div class="doc"><p>Note: All accumulation functions are strict in the accumulated value!</p><p>Note: The order of arguments is <code>acc -&gt; (x,acc)</code>
 which is also the convention used by <code>unfoldr</code> and <code>State</code>.</p></div><div class="top"><p class="src"><a id="v:unions" class="def">unions</a> :: [<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a)] -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a) <a href="src/Reactive.Banana.Combinators.html#unions" class="link">Source</a> <a href="#v:unions" class="selflink">#</a></p><div class="doc"><p>Merge event streams whose values are functions.
 In case of simultaneous occurrences, the functions at the beginning
 of the list are applied <em>after</em> the functions at the end.</p><pre>unions [] = never
unions xs = foldr1 (unionWith (.)) xs</pre><p>Very useful in conjunction with accumulation functions like <code><a href="Reactive-Banana-Combinators.html#v:accumB">accumB</a></code>
 and <code><a href="Reactive-Banana-Combinators.html#v:accumE">accumE</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:accumB" class="def">accumB</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; a -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (a -&gt; a) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> a) <a href="src/Reactive.Banana.Combinators.html#accumB" class="link">Source</a> <a href="#v:accumB" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Reactive-Banana-Combinators.html#v:accumB">accumB</a></code> function accumulates event occurrences into a <code><a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a></code>.</p><p>The value is accumulated using <code><a href="Reactive-Banana-Combinators.html#v:accumE">accumE</a></code> and converted
 into a time-varying value using <code><a href="Reactive-Banana-Combinators.html#v:stepper">stepper</a></code>.</p><p>Example:</p><pre>accumB &quot;x&quot; [(time1,(++&quot;y&quot;)),(time2,(++&quot;z&quot;))]
   = stepper &quot;x&quot; [(time1,&quot;xy&quot;),(time2,&quot;xyz&quot;)]</pre><p>Note: As with <code><a href="Reactive-Banana-Combinators.html#v:stepper">stepper</a></code>, the value of the behavior changes &quot;slightly after&quot;
 the events occur. This allows for recursive definitions.</p></div></div><div class="top"><p class="src"><a id="v:mapAccum" class="def">mapAccum</a> :: <a href="Reactive-Banana-Combinators.html#t:MonadMoment">MonadMoment</a> m =&gt; acc -&gt; <a href="Reactive-Banana-Combinators.html#t:Event">Event</a> (acc -&gt; (x, acc)) -&gt; m (<a href="Reactive-Banana-Combinators.html#t:Event">Event</a> x, <a href="Reactive-Banana-Combinators.html#t:Behavior">Behavior</a> acc) <a href="src/Reactive.Banana.Combinators.html#mapAccum" class="link">Source</a> <a href="#v:mapAccum" class="selflink">#</a></p><div class="doc"><p>Efficient combination of <code><a href="Reactive-Banana-Combinators.html#v:accumE">accumE</a></code> and <code><a href="Reactive-Banana-Combinators.html#v:accumB">accumB</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>