<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Reactive.Banana.Prim</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Reactive-Banana-Prim.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Reactive.Banana.Prim.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">reactive-banana-1.1.0.1: Library for functional reactive programming (FRP).</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Reactive.Banana.Prim</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Synopsis</a></li><li><a href="#g:2">Evaluation</a></li><li><a href="#g:3">Build FRP networks</a></li><li><a href="#g:4">Caching</a></li><li><a href="#g:5">Testing</a></li><li><a href="#g:6">IO</a></li><li><a href="#g:7">Pulse</a></li><li><a href="#g:8">Latch</a></li><li><a href="#g:9">Dynamic event switching</a></li><li><a href="#g:10">Notes</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Step">Step</a> = EvalNetwork (<a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> ())</li><li class="src short"><span class="keyword">data</span> <a href="#t:Network">Network</a></li><li class="src short"><a href="#v:emptyNetwork">emptyNetwork</a> :: <a href="Reactive-Banana-Prim.html#t:Network">Network</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Build">Build</a> = ReaderWriterIOT BuildR BuildW <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a></li><li class="src short"><a href="#v:liftIOLater">liftIOLater</a> :: <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:BuildIO">BuildIO</a> = <a href="Reactive-Banana-Prim.html#t:Build">Build</a></li><li class="src short"><a href="#v:liftBuild">liftBuild</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> a</li><li class="src short"><a href="#v:buildLater">buildLater</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> () -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> ()</li><li class="src short"><a href="#v:buildLaterReadNow">buildLaterReadNow</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a</li><li class="src short"><a href="#v:compile">compile</a> :: <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Network">Network</a> -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> (a, <a href="Reactive-Banana-Prim.html#t:Network">Network</a>)</li><li class="src short">module <a href="../base-4.9.0.0/Control-Monad-IO-Class.html">Control.Monad.IO.Class</a></li><li class="src short">module <a href="Reactive-Banana-Prim-Cached.html">Reactive.Banana.Prim.Cached</a></li><li class="src short"><a href="#v:interpret">interpret</a> :: (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b)) -&gt; [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> b]</li><li class="src short"><a href="#v:mapAccumM">mapAccumM</a> :: <a href="../base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; s -&gt; m (b, s)) -&gt; s -&gt; [a] -&gt; m [b]</li><li class="src short"><a href="#v:mapAccumM_">mapAccumM_</a> :: <a href="../base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; s -&gt; m (b, s)) -&gt; s -&gt; [a] -&gt; m ()</li><li class="src short"><a href="#v:runSpaceProfile">runSpaceProfile</a> :: <a href="../base-4.9.0.0/Text-Show.html#t:Show">Show</a> b =&gt; (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b)) -&gt; [a] -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:newInput">newInput</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a, a -&gt; <a href="Reactive-Banana-Prim.html#t:Step">Step</a>)</li><li class="src short"><a href="#v:addHandler">addHandler</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Future">Future</a> a) -&gt; (a -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> ()</li><li class="src short"><a href="#v:readLatch">readLatch</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Pulse">Pulse</a> a = Ref (Pulse' a)</li><li class="src short"><a href="#v:neverP">neverP</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a)</li><li class="src short"><a href="#v:alwaysP">alwaysP</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> ())</li><li class="src short"><a href="#v:mapP">mapP</a> :: (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Future">Future</a> = <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a></li><li class="src short"><a href="#v:tagFuture">tagFuture</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Future">Future</a> a))</li><li class="src short"><a href="#v:unsafeMapIOP">unsafeMapIOP</a> :: (a -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b)</li><li class="src short"><a href="#v:filterJustP">filterJustP</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a)</li><li class="src short"><a href="#v:unionWithP">unionWithP</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Latch">Latch</a> a = Ref (Latch' a)</li><li class="src short"><a href="#v:pureL">pureL</a> :: a -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a</li><li class="src short"><a href="#v:mapL">mapL</a> :: (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> b</li><li class="src short"><a href="#v:applyL">applyL</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> b</li><li class="src short"><a href="#v:accumL">accumL</a> :: a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (a -&gt; a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a, <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a)</li><li class="src short"><a href="#v:applyP">applyP</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b)</li><li class="src short"><a href="#v:switchL">switchL</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a)</li><li class="src short"><a href="#v:executeP">executeP</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (b -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a) -&gt; b -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a)</li><li class="src short"><a href="#v:switchP">switchP</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a)</li></ul></div><div id="interface"><h1 id="g:1">Synopsis</h1><div class="doc"><p>This is an internal module, useful if you want to
 implemented your own FRP library.
 If you just want to use FRP in your project,
 have a look at <a href="Reactive-Banana.html">Reactive.Banana</a> instead.</p></div><h1 id="g:2">Evaluation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Step" class="def">Step</a> = EvalNetwork (<a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> ()) <a href="src/Reactive.Banana.Prim.Types.html#Step" class="link">Source</a> <a href="#t:Step" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Network" class="def">Network</a> <a href="src/Reactive.Banana.Prim.Types.html#Network" class="link">Source</a> <a href="#t:Network" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Reactive-Banana-Prim.html#t:Network">Network</a></code> represents the state of a pulse/latch network,</p></div></div><div class="top"><p class="src"><a id="v:emptyNetwork" class="def">emptyNetwork</a> :: <a href="Reactive-Banana-Prim.html#t:Network">Network</a> <a href="src/Reactive.Banana.Prim.Types.html#emptyNetwork" class="link">Source</a> <a href="#v:emptyNetwork" class="selflink">#</a></p></div><h1 id="g:3">Build FRP networks</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Build" class="def">Build</a> = ReaderWriterIOT BuildR BuildW <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> <a href="src/Reactive.Banana.Prim.Types.html#Build" class="link">Source</a> <a href="#t:Build" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:liftIOLater" class="def">liftIOLater</a> :: <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> () <a href="src/Reactive.Banana.Prim.Plumbing.html#liftIOLater" class="link">Source</a> <a href="#v:liftIOLater" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:BuildIO" class="def">BuildIO</a> = <a href="Reactive-Banana-Prim.html#t:Build">Build</a> <a href="src/Reactive.Banana.Prim.Types.html#BuildIO" class="link">Source</a> <a href="#t:BuildIO" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:liftBuild" class="def">liftBuild</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> a <a href="src/Reactive.Banana.Prim.Plumbing.html#liftBuild" class="link">Source</a> <a href="#v:liftBuild" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:buildLater" class="def">buildLater</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> () -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> () <a href="src/Reactive.Banana.Prim.Plumbing.html#buildLater" class="link">Source</a> <a href="#v:buildLater" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:buildLaterReadNow" class="def">buildLaterReadNow</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a <a href="src/Reactive.Banana.Prim.Plumbing.html#buildLaterReadNow" class="link">Source</a> <a href="#v:buildLaterReadNow" class="selflink">#</a></p><div class="doc"><p>Pretend to return a value right now,
 but do not actually calculate it until later.</p><p>NOTE: Accessing the value before it's written leads to an error.</p><p>FIXME: Is there a way to have the value calculate on demand?</p></div></div><div class="top"><p class="src"><a id="v:compile" class="def">compile</a> :: <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Network">Network</a> -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> (a, <a href="Reactive-Banana-Prim.html#t:Network">Network</a>) <a href="src/Reactive.Banana.Prim.Compile.html#compile" class="link">Source</a> <a href="#v:compile" class="selflink">#</a></p><div class="doc"><p>Change a <code><a href="Reactive-Banana-Prim.html#t:Network">Network</a></code> of pulses and latches by 
 executing a <code><a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a></code> action.</p></div></div><div class="top"><p class="src">module <a href="../base-4.9.0.0/Control-Monad-IO-Class.html">Control.Monad.IO.Class</a></p></div><h1 id="g:4">Caching</h1><div class="top"><p class="src">module <a href="Reactive-Banana-Prim-Cached.html">Reactive.Banana.Prim.Cached</a></p></div><h1 id="g:5">Testing</h1><div class="top"><p class="src"><a id="v:interpret" class="def">interpret</a> :: (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b)) -&gt; [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a] -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> b] <a href="src/Reactive.Banana.Prim.Compile.html#interpret" class="link">Source</a> <a href="#v:interpret" class="selflink">#</a></p><div class="doc"><p>Simple interpreter for pulse/latch networks.</p><p>Mainly useful for testing functionality</p><p>Note: The result is not computed lazily, for similar reasons
 that the <code><a href="../base-4.9.0.0/Data-Traversable.html#v:sequence">sequence</a></code> function does not compute its result lazily.</p></div></div><div class="top"><p class="src"><a id="v:mapAccumM" class="def">mapAccumM</a> :: <a href="../base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; s -&gt; m (b, s)) -&gt; s -&gt; [a] -&gt; m [b] <a href="src/Reactive.Banana.Prim.Compile.html#mapAccumM" class="link">Source</a> <a href="#v:mapAccumM" class="selflink">#</a></p><div class="doc"><p><code>mapAccum</code> for a monad.</p></div></div><div class="top"><p class="src"><a id="v:mapAccumM_" class="def">mapAccumM_</a> :: <a href="../base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; s -&gt; m (b, s)) -&gt; s -&gt; [a] -&gt; m () <a href="src/Reactive.Banana.Prim.Compile.html#mapAccumM_" class="link">Source</a> <a href="#v:mapAccumM_" class="selflink">#</a></p><div class="doc"><p>Strict <code>mapAccum</code> for a monad. Discards results.</p></div></div><div class="top"><p class="src"><a id="v:runSpaceProfile" class="def">runSpaceProfile</a> :: <a href="../base-4.9.0.0/Text-Show.html#t:Show">Show</a> b =&gt; (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:BuildIO">BuildIO</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b)) -&gt; [a] -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> () <a href="src/Reactive.Banana.Prim.Compile.html#runSpaceProfile" class="link">Source</a> <a href="#v:runSpaceProfile" class="selflink">#</a></p><div class="doc"><p>Execute an FRP network with a sequence of inputs.
 Make sure that outputs are evaluated, but don't display their values.</p><p>Mainly useful for testing whether there are space leaks. </p></div></div><h1 id="g:6">IO</h1><div class="top"><p class="src"><a id="v:newInput" class="def">newInput</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a, a -&gt; <a href="Reactive-Banana-Prim.html#t:Step">Step</a>) <a href="src/Reactive.Banana.Prim.IO.html#newInput" class="link">Source</a> <a href="#v:newInput" class="selflink">#</a></p><div class="doc"><p>Create a new pulse in the network and a function to trigger it.</p><p>Together with <code><a href="Reactive-Banana-Prim.html#v:addHandler">addHandler</a></code>, this function can be used to operate with
 pulses as with standard callback-based events.</p></div></div><div class="top"><p class="src"><a id="v:addHandler" class="def">addHandler</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Future">Future</a> a) -&gt; (a -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> () <a href="src/Reactive.Banana.Prim.IO.html#addHandler" class="link">Source</a> <a href="#v:addHandler" class="selflink">#</a></p><div class="doc"><p>Register a handler to be executed whenever a pulse occurs.</p><p>The pulse may refer to future latch values.</p></div></div><div class="top"><p class="src"><a id="v:readLatch" class="def">readLatch</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a <a href="src/Reactive.Banana.Prim.IO.html#readLatch" class="link">Source</a> <a href="#v:readLatch" class="selflink">#</a></p><div class="doc"><p>Read the value of a <code><a href="Reactive-Banana-Prim.html#t:Latch">Latch</a></code> at a particular moment in time.</p></div></div><h1 id="g:7">Pulse</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Pulse" class="def">Pulse</a> a = Ref (Pulse' a) <a href="src/Reactive.Banana.Prim.Types.html#Pulse" class="link">Source</a> <a href="#t:Pulse" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:neverP" class="def">neverP</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) <a href="src/Reactive.Banana.Prim.Plumbing.html#neverP" class="link">Source</a> <a href="#v:neverP" class="selflink">#</a></p><div class="doc"><p><code><a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a></code> that never fires.</p></div></div><div class="top"><p class="src"><a id="v:alwaysP" class="def">alwaysP</a> :: <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> ()) <a href="src/Reactive.Banana.Prim.Plumbing.html#alwaysP" class="link">Source</a> <a href="#v:alwaysP" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mapP" class="def">mapP</a> :: (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b) <a href="src/Reactive.Banana.Prim.Combinators.html#mapP" class="link">Source</a> <a href="#v:mapP" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Future" class="def">Future</a> = <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> <a href="src/Reactive.Banana.Prim.Types.html#Future" class="link">Source</a> <a href="#t:Future" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:tagFuture" class="def">tagFuture</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Future">Future</a> a)) <a href="src/Reactive.Banana.Prim.Combinators.html#tagFuture" class="link">Source</a> <a href="#v:tagFuture" class="selflink">#</a></p><div class="doc"><p>Tag a <code><a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a></code> with future values of a <code><a href="Reactive-Banana-Prim.html#t:Latch">Latch</a></code>.</p><p>This is in contrast to <code><a href="Reactive-Banana-Prim.html#v:applyP">applyP</a></code> which applies the current value
 of a <code><a href="Reactive-Banana-Prim.html#t:Latch">Latch</a></code> to a pulse.</p></div></div><div class="top"><p class="src"><a id="v:unsafeMapIOP" class="def">unsafeMapIOP</a> :: (a -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b) <a href="src/Reactive.Banana.Prim.Combinators.html#unsafeMapIOP" class="link">Source</a> <a href="#v:unsafeMapIOP" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:filterJustP" class="def">filterJustP</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) <a href="src/Reactive.Banana.Prim.Combinators.html#filterJustP" class="link">Source</a> <a href="#v:filterJustP" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unionWithP" class="def">unionWithP</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) <a href="src/Reactive.Banana.Prim.Combinators.html#unionWithP" class="link">Source</a> <a href="#v:unionWithP" class="selflink">#</a></p></div><h1 id="g:8">Latch</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Latch" class="def">Latch</a> a = Ref (Latch' a) <a href="src/Reactive.Banana.Prim.Types.html#Latch" class="link">Source</a> <a href="#t:Latch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pureL" class="def">pureL</a> :: a -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a <a href="src/Reactive.Banana.Prim.Combinators.html#pureL" class="link">Source</a> <a href="#v:pureL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mapL" class="def">mapL</a> :: (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> b <a href="src/Reactive.Banana.Prim.Combinators.html#mapL" class="link">Source</a> <a href="#v:mapL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:applyL" class="def">applyL</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> b <a href="src/Reactive.Banana.Prim.Combinators.html#applyL" class="link">Source</a> <a href="#v:applyL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:accumL" class="def">accumL</a> :: a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (a -&gt; a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a, <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) <a href="src/Reactive.Banana.Prim.Combinators.html#accumL" class="link">Source</a> <a href="#v:accumL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:applyP" class="def">applyP</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> (a -&gt; b) -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> b) <a href="src/Reactive.Banana.Prim.Combinators.html#applyP" class="link">Source</a> <a href="#v:applyP" class="selflink">#</a></p></div><h1 id="g:9">Dynamic event switching</h1><div class="top"><p class="src"><a id="v:switchL" class="def">switchL</a> :: <a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a -&gt; <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Latch">Latch</a> a) <a href="src/Reactive.Banana.Prim.Combinators.html#switchL" class="link">Source</a> <a href="#v:switchL" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:executeP" class="def">executeP</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (b -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> a) -&gt; b -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) <a href="src/Reactive.Banana.Prim.Combinators.html#executeP" class="link">Source</a> <a href="#v:executeP" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:switchP" class="def">switchP</a> :: <a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) -&gt; <a href="Reactive-Banana-Prim.html#t:Build">Build</a> (<a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a> a) <a href="src/Reactive.Banana.Prim.Combinators.html#switchP" class="link">Source</a> <a href="#v:switchP" class="selflink">#</a></p></div><h1 id="g:10">Notes</h1><div class="doc"><p>The <code><a href="Reactive-Banana-Prim.html#t:Build">Build</a></code> monad is an instance of <code>MonadFix</code> and supports value recursion.
However, it is built on top of the <code><a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a></code> monad, so the recursion is
somewhat limited.</p><p>The main rule for value recursion in the <code><a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a></code> monad is that the action
to be performed must be known in advance. For instance, the following snippet
will not work, because <code><a href="../base-4.9.0.0/System-IO.html#v:putStrLn">putStrLn</a></code> cannot complete its action without
inspecting <code>x</code>, which is not defined until later.</p><pre>  mdo
      putStrLn x
      let x = &quot;Hello recursion&quot;</pre><p>On the other hand, whenever the sequence of <code><a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a></code> actions can be known
before inspecting any later arguments, the recursion works.
For instance the snippet</p><pre>  mdo
      p1 &lt;- mapP p2
      p2 &lt;- neverP
      return p1</pre><p>works because <code><a href="Reactive-Banana-Prim.html#v:mapP">mapP</a></code> does not inspect its argument. In other words,
a call <code>p1 &lt;- mapP undefined</code> would perform the same sequence of <code><a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a></code> actions.
(Internally, it essentially calls <code>newIORef</code>.)</p><p>With this issue in mind, almost all operations that build <code><a href="Reactive-Banana-Prim.html#t:Latch">Latch</a></code>
and <code><a href="Reactive-Banana-Prim.html#t:Pulse">Pulse</a></code> values have been carefully implemented to not inspect
their arguments.
In conjunction with the <code><a href="Reactive-Banana-Prim-Cached.html#t:Cached">Cached</a></code> mechanism for observable sharing,
this allows us to build combinators that can be used recursively.
One notable exception is the <code><a href="Reactive-Banana-Prim.html#v:readLatch">readLatch</a></code> function, which must
inspect its argument in order to be able to read its value.</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>